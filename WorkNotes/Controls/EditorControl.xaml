<UserControl x:Class="WorkNotes.Controls.EditorControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit">
    <UserControl.Resources>
        <!-- Context Menu for Source Editor -->
        <ContextMenu x:Key="SourceEditorContextMenu">
            <MenuItem Header="Undo" 
                      Click="ContextUndo_Click" 
                      InputGestureText="Ctrl+Z"/>
            <MenuItem Header="Redo" 
                      Click="ContextRedo_Click" 
                      InputGestureText="Ctrl+Y"/>
            <Separator/>
            <MenuItem Header="Cut" 
                      Click="ContextCut_Click" 
                      InputGestureText="Ctrl+X"/>
            <MenuItem Header="Copy" 
                      Click="ContextCopy_Click" 
                      InputGestureText="Ctrl+C"/>
            <MenuItem Header="Paste" 
                      Click="ContextPaste_Click" 
                      InputGestureText="Ctrl+V"/>
            <Separator/>
            <MenuItem Header="Select All" 
                      Click="ContextSelectAll_Click" 
                      InputGestureText="Ctrl+A"/>
            <Separator/>
            <MenuItem Header="Bold" 
                      Click="ContextBold_Click" 
                      InputGestureText="Ctrl+B"/>
            <MenuItem Header="Italic" 
                      Click="ContextItalic_Click" 
                      InputGestureText="Ctrl+I"/>
            <MenuItem Header="Insert Link" 
                      Click="ContextInsertLink_Click" 
                      InputGestureText="Ctrl+K"/>
        </ContextMenu>
        
        <!-- Context Menu for Formatted Editor -->
        <ContextMenu x:Key="FormattedEditorContextMenu">
            <MenuItem Header="Undo" 
                      Click="ContextUndo_Click" 
                      InputGestureText="Ctrl+Z"/>
            <MenuItem Header="Redo" 
                      Click="ContextRedo_Click" 
                      InputGestureText="Ctrl+Y"/>
            <Separator/>
            <MenuItem Header="Cut" 
                      Click="ContextCut_Click" 
                      InputGestureText="Ctrl+X"/>
            <MenuItem Header="Copy" 
                      Click="ContextCopy_Click" 
                      InputGestureText="Ctrl+C"/>
            <MenuItem Header="Paste" 
                      Click="ContextPaste_Click" 
                      InputGestureText="Ctrl+V"/>
            <Separator/>
            <MenuItem Header="Select All" 
                      Click="ContextSelectAll_Click" 
                      InputGestureText="Ctrl+A"/>
            <Separator/>
            <MenuItem Header="Bold" 
                      Click="ContextBold_Click" 
                      InputGestureText="Ctrl+B"/>
            <MenuItem Header="Italic" 
                      Click="ContextItalic_Click" 
                      InputGestureText="Ctrl+I"/>
            <MenuItem Header="Insert Link" 
                      Click="ContextInsertLink_Click" 
                      InputGestureText="Ctrl+K"/>
        </ContextMenu>
    </UserControl.Resources>
    
    <Grid>
        <!-- Empty State Placeholder (subtle, behind editors) -->
        <TextBlock x:Name="EmptyStatePlaceholder"
                   Text="Start writing..."
                   FontSize="16"
                   FontStyle="Italic"
                   Foreground="{DynamicResource App.TextDisabled}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="0,-100,0,0"
                   IsHitTestVisible="False"
                   Opacity="0.4"
                   Visibility="Collapsed"/>
        
        <!-- Source View (Plain Markdown with comfortable padding) -->
        <avalonedit:TextEditor x:Name="SourceEditor"
                               Background="{DynamicResource App.EditorBackground}"
                               Foreground="{DynamicResource App.EditorForeground}"
                               LineNumbersForeground="{DynamicResource App.EditorLineNumbersForeground}"
                               FontFamily="Consolas"
                               FontSize="14"
                               ShowLineNumbers="True"
                               Padding="32,24,32,24"
                               VerticalScrollBarVisibility="Auto"
                               HorizontalScrollBarVisibility="Auto"
                               WordWrap="False"
                               ContextMenu="{StaticResource SourceEditorContextMenu}"
                               Visibility="Collapsed">
        </avalonedit:TextEditor>

        <!-- Formatted View (Rich Text with comfortable padding) -->
        <RichTextBox x:Name="FormattedEditor"
                     Background="{DynamicResource App.EditorBackground}"
                     Foreground="{DynamicResource App.EditorForeground}"
                     FontFamily="Segoe UI"
                     FontSize="14"
                     Padding="32,24,32,24"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Auto"
                     AcceptsReturn="True"
                     AcceptsTab="True"
                     IsDocumentEnabled="True"
                     SpellCheck.IsEnabled="True"
                     Language="en-US"
                     ContextMenu="{StaticResource FormattedEditorContextMenu}"
                     Visibility="Visible">
            <RichTextBox.Document>
                <FlowDocument/>
            </RichTextBox.Document>
        </RichTextBox>
    </Grid>
</UserControl>
